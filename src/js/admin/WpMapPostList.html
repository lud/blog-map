<div class="wpmap-admin-posts-list">
    <table>
    <tr>
        <th>#</th>
        <th>Title</th>
        <th>Type</th>
        <th>Status</th>
        <th>Vis</th>
        <th>Visible</th>
        <th>Country</th>
        <th>Location</th>
        <th>Coords</th>
    </tr>
    {#each $posts as post}
        <tr class="wpmap-admin-posts-list-item">

            <td>{post._id}</td>
            <td>{post.props.title}</td>
            <td>{post.props.type}</td>
            <td>{post.props.status}</td>
            <td>{JSON.stringify(post.meta.wpmap_visibilities)}</td>
            <!-- <pre>{JSON.stringify(post, 0, ' ')}</pre> -->
            <td>
                <ToggleSwitch
                    checked="{post.meta.wpmap_visibilities[$mapId] === WPMAP_VIS_ONMAP}"
                    on="{WPMAP_VIS_ONMAP}"
                    off="{WPMAP_VIS_NOTONMAP}"
                    on:change="$actTogglePostVisibilities(post._id, event)"/>
            </td>
            <td><CountryPicker on:change="$actSetPostCountryCode(post._id, event)"/></td>
            <td>{post.meta.wpmap_geocoded}</td>
            <td>{post.meta.wpmap_latlng}</td>
        </tr>
    {/each}
    </table>
</div>

<script>

import ToggleSwitch from './wp/ToggleSwitch.html'
import CountryPicker from './wp/CountryPicker.html'

const WPMAP_VIS_ONMAP = 1 // Show on map
const WPMAP_VIS_NOTONMAP = 0 // Do not show on map

export default {
    immutable: true,
    data() {
        return {
            WPMAP_VIS_ONMAP,
            WPMAP_VIS_NOTONMAP
        }
    },
    components: { ToggleSwitch, CountryPicker },
    helpers: {
        cls(header, x) {
            console.log(header, x)
            return x
        }
    }
}

</script>

<style>
    th {
        text-align: left;
    }
    th:first-child, td:first-child {
        text-align: right;
        font-family: monospace;
    }
</style>
