<div class="wpmap-admin-posts-list">
    {#each $rawPosts as post (post._id)}
        <div class="wpmap-admin-posts-list-item">
            <span>#{post._id}</span>
            <span>{post.props.title}</span>
            <span>{post.meta.wpmap_visibilities}</span>
            <!-- <pre>{JSON.stringify(post, 0, ' ')}</pre> -->
            <ToggleSwitch
                checked="{post.meta.wpmap_visibilities[$mapId] === WPMAP_VIS_ONMAP}"
                on="{WPMAP_VIS_ONMAP}"
                off="{WPMAP_VIS_NOTONMAP}"
                on:change="$actTogglePostVisibilities(post._id, event)"/>
            <span>{post.meta.wpmap_latlng}</span>
            <span>{post.meta.wpmap_geocoded}</span>
        </div>
    {/each}
</div>

<script>
import ToggleSwitch from './wp/ToggleSwitch.html'

const WPMAP_VIS_ONMAP = 1 // Show on map
const WPMAP_VIS_NOTONMAP = 0 // Do not show on map

export default {
    data() {
        return {
            WPMAP_VIS_ONMAP,
            WPMAP_VIS_NOTONMAP
        }
    },
    components: { ToggleSwitch },
    helpers: {
        cls(header, x) {
            console.log(header, x)
            return x
        }
    }
}

</script>
