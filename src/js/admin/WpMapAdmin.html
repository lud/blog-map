<div class="wpmap-admin">
    {#await $initialLoading}
        Loading ...
        <LoadingSpinner/>
    {:then _}
        <p>{$mapConfig.name} <code>{$mapID}</code></p>
        {#if $posts.length === 0}
            <p>No post available</p>
        {:else}
            <WpMapPostList/>
        {/if}
        <CountriesDatalist/>
        <div>{JSON.stringify($mapConfig, 0, '  ')}</div>

        <PinDesigner on:change="$actSetPinConfig(event)" height={$mapConfig.pin_height} radius={$mapConfig.pin_radius} />
    {:catch error}
        NotLoaded !
        <p class="error">Error loading plugin</p>
        <pre>{JSON.stringify(error.response.body.errors, 0, '  ')}</pre>
    {/await}
</div>

<script>
import WpMapPostList from './WpMapPostList.html'
import LoadingSpinner from './wp/LoadingSpinner.html'
import CountriesDatalist from './wp/CountriesDatalist.html'
import PinDesigner from './wp/PinDesigner.html'
import WpMap from './../client/WpMap.html'

export default {
    components: { WpMapPostList
                , LoadingSpinner
                , CountriesDatalist
                , WpMap
                , PinDesigner
            }
}

</script>
